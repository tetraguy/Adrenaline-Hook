<Window x:Class="AdrenalineHookWpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Adrenaline Hook | Ver. 2.0.0"
        Width="1150" Height="760"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="190"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Banner -->
        <Border Grid.Row="0" Background="Black">
            <Image Source="Assets/banner.png" Margin="0,0,0,-15" Stretch="Fill"/>
        </Border>

        <!-- Search + toolbar -->
        <Border Grid.Row="1" Background="#FFF7F7F7" BorderBrush="#FFD0D0D0" BorderThickness="0,1,0,1" Padding="10">
            <DockPanel LastChildFill="True">
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" VerticalAlignment="Center">
                    <TextBlock Text="Search:" VerticalAlignment="Center" FontWeight="SemiBold"/>
                    <TextBox x:Name="SearchBox" Width="360" KeyDown="SearchBox_KeyDown"/>
                    <Button Content="&#xE721;" FontFamily="Segoe MDL2 Assets" Width="38" Height="28" Margin="8,0,0,0"
                            ToolTip="Search" Click="Search_Click"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" Width="379">
                    <Button Width="40" Height="28" Content="&#xE713;" FontFamily="Segoe MDL2 Assets"
                            ToolTip="Verify database (hooked + missing)" Click="Verify_Click"/>
                    <Button Width="40" Height="28" Content="&#xE74E;" FontFamily="Segoe MDL2 Assets"
                            ToolTip="Backup database" Click="Backup_Click"/>
                    <Button Width="40" Height="28" Content="&#xE777;" FontFamily="Segoe MDL2 Assets"
                            ToolTip="Restore database" Click="Restore_Click"/>
                    <Button Width="40" Height="28" Content="&#xE8BB;" FontFamily="Segoe MDL2 Assets"
                            ToolTip="View hooked apps" Click="ViewHooked_Click"/>
                    <Button Width="40" Height="28" Content="&#xE8C7;" FontFamily="Segoe MDL2 Assets"
                            ToolTip="Open database editor" Click="DbEditor_Click"/>
                    <Button Width="40" Height="28" Content="&#xE7B3;" FontFamily="Segoe MDL2 Assets"
                            ToolTip="System info" Click="Info_Click"/>
                    <Button Width="40" Height="28" Content="&#xE894;" FontFamily="Segoe MDL2 Assets"
                            ToolTip="Reset gmdb.blb (AMD will rebuild)" Click="Reset_Click"/>
                    <Button Width="40" Height="28" Content="&#xE714;" FontFamily="Segoe MDL2 Assets"
                            ToolTip="Open GitHub repository" Click="GitHub_Click"/>
                    <Button Width="40" Height="28" Content="&#xE767;" FontFamily="Segoe MDL2 Assets"
                            ToolTip="Open tutorial video" Click="Tutorial_Click"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Main area -->
        <Grid Grid.Row="2" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="260"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" BorderBrush="#FFD0D0D0" BorderThickness="1" CornerRadius="4">
                <DataGrid x:Name="AppsGrid" ItemsSource="{Binding AppsView}" MouseRightButtonDown="AppsGrid_MouseRightButtonDown">
                    <DataGrid.Resources>
                        <Style TargetType="{x:Type DataGridRow}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsAlreadyHooked}" Value="True">
                                    <Setter Property="Foreground" Value="DarkRed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.Resources>

                    <DataGrid.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Hook This" Click="CtxHookThis_Click"/>
                            <MenuItem Header="Open Install Location" Click="CtxOpenLocation_Click"/>
                            <MenuItem Header="Application Details" Click="CtxDetails_Click"/>
                            <MenuItem Header="Start Application" Click="CtxStart_Click"/>
                        </ContextMenu>
                    </DataGrid.ContextMenu>

                    <DataGrid.Columns>
                        <DataGridCheckBoxColumn Binding="{Binding IsChecked, Mode=TwoWay}" Width="42" />
                        <DataGridTextColumn Header="Application Name" Binding="{Binding Name}" Width="*"/>
                        <DataGridTextColumn Header="Executable Location" Binding="{Binding ExePath}" Width="2*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>

            <StackPanel Grid.Column="1" Margin="12,0,0,0">
                <Button Content="Scan UWP/GamePass Games" Click="ScanUwp_Click"/>
                <Button Content="Scan Installed Software" Click="ScanInstalled_Click"/>
                <Button Content="Hook Program Manually" Click="HookManual_Click"/>
                <Button Content="Remove Hooked Application(s)" Click="RemoveHooked_Click"/>
                <Button Content="Open AMD Software" Click="OpenAmd_Click"/>
                <Border Height="12" Background="Transparent"/>
                <Button Content="Hook Selection(s)" Background="#FF63D5A7" Click="HookSelections_Click"/>
                <Border Height="12" Background="Transparent"/>
                <TextBlock Text="{Binding StatusText}" TextWrapping="Wrap" Foreground="#FF444444"/>
            </StackPanel>
        </Grid>

        <Border Grid.Row="3" Background="#FFF7F7F7" BorderBrush="#FFD0D0D0" BorderThickness="0,1,0,0" Padding="10">
            <DockPanel>
                <TextBlock Text="Developed by TetraDev " Foreground="#FF666666"/>
                <TextBlock Text="{Binding FooterText}" DockPanel.Dock="Right" Foreground="#FF666666" Width="791"/>
            </DockPanel>
        </Border>

        <!-- Busy overlay -->
        <Border x:Name="BusyOverlay" Background="#AAFFFFFF" Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Width="380">
                <ProgressBar IsIndeterminate="True" Height="16"/>
                <TextBlock Text="{Binding BusyText}" Margin="0,10,0,0" TextAlignment="Center" TextWrapping="Wrap"/>
                <Button Content="Cancel" Width="120" HorizontalAlignment="Center" Click="Cancel_Click" Margin="0,12,0,0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
